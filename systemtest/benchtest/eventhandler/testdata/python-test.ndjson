{"metadata": {"service": {"name": "opbeans-python", "environment": "production", "version": "None", "agent": {"name": "python", "version": "6.7.2"}, "language": {"name": "python", "version": "3.10.2"}, "runtime": {"name": "CPython", "version": "3.10.2"}, "framework": {"name": "django", "version": "3.2.11"}}, "process": {"pid": 155, "ppid": 115, "argv": ["/app/venv/bin/celery", "-A", "opbeans", "worker", "--concurrency=1", "-l", "info"], "title": null}, "system": {"hostname": "e7a733e715cb", "architecture": "x86_64", "platform": "linux"}}}
{"span": {"id": "e0736acc0ffd3a54", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "SELECT FROM opbeans_product", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996559973459, "duration": 27.52154099289328, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT SUM(\"total_revenue\"), SUM(\"total_cost\"), SUM(\"total_profit\") FROM (SELECT COUNT(\"opbeans_orderline\".\"order_id\") AS \"order_count\", (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\") AS \"per_item_profit\", (COUNT(\"opbeans_orderline\".\"order_id\") * (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\")) AS \"total_profit\", (COUNT(\"opbeans_orderline\".\"order_id\") * \"opbeans_product\".\"selling_price\") AS \"total_revenue\", (COUNT(\"opbeans_orderline\".\"order_id\") * \"opbeans_product\".\"cost\") AS \"total_cost\" FROM \"opbeans_product\" LEFT OUTER JOIN \"opbeans_orderline\" ON (\"opbeans_product\".\"id\" = \"opbeans_orderline\".\"product_id\") GROUP BY \"opbeans_product\".\"id\", (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\")) subquery"}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "_execute_with_wrappers", "lineno": 75, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "execute", "lineno": 66, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", "filename": "django/db/models/sql/compiler.py", "module": "django.db.models.sql.compiler", "function": "execute_sql", "lineno": 1175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_aggregation", "lineno": 504, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/query.py", "filename": "django/db/models/query.py", "module": "django.db.models.query", "function": "aggregate", "lineno": 399, "library_frame": true}, {"abs_path": "/app/opbeans/utils.py", "filename": "opbeans/utils.py", "module": "opbeans.utils", "function": "stats", "lineno": 9, "library_frame": false, "pre_context": ["", "def stats():"], "context_line": "    numbers = m.Product.objects.annotate(", "post_context": ["        order_count=models.Count('order'),", "        per_item_profit=models.F('selling_price') - models.F('cost')"]}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "0b0dd98320162aa1", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "SELECT FROM opbeans_product", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996560007753, "duration": 2.188290993217379, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_product\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}}}
{"span": {"id": "510af8ece80d5047", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "SELECT FROM opbeans_customer", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996560012225, "duration": 1.8695840262807906, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_customer\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}}}
{"span": {"id": "5bec00c459aec0ca", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "SELECT FROM opbeans_order", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996560015802, "duration": 12.086583010386676, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_order\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "_execute_with_wrappers", "lineno": 75, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "execute", "lineno": 66, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", "filename": "django/db/models/sql/compiler.py", "module": "django.db.models.sql.compiler", "function": "execute_sql", "lineno": 1175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_aggregation", "lineno": 504, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_count", "lineno": 519, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/query.py", "filename": "django/db/models/query.py", "module": "django.db.models.query", "function": "count", "lineno": 412, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/manager.py", "filename": "django/db/models/manager.py", "module": "django.db.models.manager", "function": "manager_method", "lineno": 85, "library_frame": true}, {"abs_path": "/app/opbeans/utils.py", "filename": "opbeans/utils.py", "module": "opbeans.utils", "function": "stats", "lineno": 24, "library_frame": false, "pre_context": ["        'products': m.Product.objects.count(),", "        'customers': m.Customer.objects.count(),"], "context_line": "        'orders': m.Order.objects.count(),", "post_context": ["        'numbers': numbers", "    }"]}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "a190c1209f08eca9", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "SET", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996560032966, "duration": 6.438666023313999, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/redis/commands/core.py", "filename": "redis/commands/core.py", "module": "redis.commands.core", "function": "set", "lineno": 1673, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/client/default.py", "filename": "django_redis/client/default.py", "module": "django_redis.client.default", "function": "set", "lineno": 175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/cache.py", "filename": "django_redis/cache.py", "module": "django_redis.cache", "function": "set", "lineno": 80, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/cache.py", "filename": "django_redis/cache.py", "module": "django_redis.cache", "function": "_decorator", "lineno": 31, "library_frame": true}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "f0dbb024c3902582", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "GET", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996560042606, "duration": 1.530999958049506, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}}}
{"span": {"id": "a2101b5510e7d15f", "transaction_id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "parent_id": "e90ec1d8cc0fd541", "name": "Pipeline.execute", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996560044863, "duration": 1.2956249993294477, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}}}
{"transaction": {"id": "e90ec1d8cc0fd541", "trace_id": "6d73641070380d946e08cfa207017198", "name": "opbeans.tasks.update_stats", "type": "celery", "duration": 92.48929197201505, "result": "SUCCESS", "timestamp": 1644996559955389, "outcome": "success", "sampled": true, "span_count": {"started": 7, "dropped": 0}, "sample_rate": 1.0, "context": {"custom": {"a": "x", "b": "y"}, "tags": {"a": "x", "b": "y"}}}}
{"span": {"id": "c489ff2c24f5f398", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "SELECT FROM opbeans_product", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996565034059, "duration": 40.72604200337082, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT SUM(\"total_revenue\"), SUM(\"total_cost\"), SUM(\"total_profit\") FROM (SELECT COUNT(\"opbeans_orderline\".\"order_id\") AS \"order_count\", (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\") AS \"per_item_profit\", (COUNT(\"opbeans_orderline\".\"order_id\") * (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\")) AS \"total_profit\", (COUNT(\"opbeans_orderline\".\"order_id\") * \"opbeans_product\".\"selling_price\") AS \"total_revenue\", (COUNT(\"opbeans_orderline\".\"order_id\") * \"opbeans_product\".\"cost\") AS \"total_cost\" FROM \"opbeans_product\" LEFT OUTER JOIN \"opbeans_orderline\" ON (\"opbeans_product\".\"id\" = \"opbeans_orderline\".\"product_id\") GROUP BY \"opbeans_product\".\"id\", (\"opbeans_product\".\"selling_price\" - \"opbeans_product\".\"cost\")) subquery"}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "_execute_with_wrappers", "lineno": 75, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "execute", "lineno": 66, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", "filename": "django/db/models/sql/compiler.py", "module": "django.db.models.sql.compiler", "function": "execute_sql", "lineno": 1175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_aggregation", "lineno": 504, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/query.py", "filename": "django/db/models/query.py", "module": "django.db.models.query", "function": "aggregate", "lineno": 399, "library_frame": true}, {"abs_path": "/app/opbeans/utils.py", "filename": "opbeans/utils.py", "module": "opbeans.utils", "function": "stats", "lineno": 9, "library_frame": false, "pre_context": ["", "def stats():"], "context_line": "    numbers = m.Product.objects.annotate(", "post_context": ["        order_count=models.Count('order'),", "        per_item_profit=models.F('selling_price') - models.F('cost')"]}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "95e3c3e84778690c", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "SELECT FROM opbeans_product", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996565093943, "duration": 2.5107080000452697, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_product\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}}}
{"span": {"id": "0bc1fdfd6e27e0c6", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "SELECT FROM opbeans_customer", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996565101650, "duration": 6.609874952118844, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_customer\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "_execute_with_wrappers", "lineno": 75, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "execute", "lineno": 66, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", "filename": "django/db/models/sql/compiler.py", "module": "django.db.models.sql.compiler", "function": "execute_sql", "lineno": 1175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_aggregation", "lineno": 504, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_count", "lineno": 519, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/query.py", "filename": "django/db/models/query.py", "module": "django.db.models.query", "function": "count", "lineno": 412, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/manager.py", "filename": "django/db/models/manager.py", "module": "django.db.models.manager", "function": "manager_method", "lineno": 85, "library_frame": true}, {"abs_path": "/app/opbeans/utils.py", "filename": "opbeans/utils.py", "module": "opbeans.utils", "function": "stats", "lineno": 23, "library_frame": false, "pre_context": ["    data = {", "        'products': m.Product.objects.count(),"], "context_line": "        'customers': m.Customer.objects.count(),", "post_context": ["        'orders': m.Order.objects.count(),", "        'numbers': numbers"]}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "ab500beae5bc585b", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "SELECT FROM opbeans_order", "type": "db", "subtype": "postgresql", "action": "query", "timestamp": 1644996565116244, "duration": 17.310332972556353, "outcome": "success", "sample_rate": 1.0, "context": {"db": {"type": "sql", "statement": "SELECT COUNT(*) AS \"__count\" FROM \"opbeans_order\""}, "destination": {"address": "postgres", "port": 5432, "service": {"resource": "postgresql", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "_execute_with_wrappers", "lineno": 75, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/backends/utils.py", "filename": "django/db/backends/utils.py", "module": "django.db.backends.utils", "function": "execute", "lineno": 66, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", "filename": "django/db/models/sql/compiler.py", "module": "django.db.models.sql.compiler", "function": "execute_sql", "lineno": 1175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_aggregation", "lineno": 504, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/sql/query.py", "filename": "django/db/models/sql/query.py", "module": "django.db.models.sql.query", "function": "get_count", "lineno": 519, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/query.py", "filename": "django/db/models/query.py", "module": "django.db.models.query", "function": "count", "lineno": 412, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django/db/models/manager.py", "filename": "django/db/models/manager.py", "module": "django.db.models.manager", "function": "manager_method", "lineno": 85, "library_frame": true}, {"abs_path": "/app/opbeans/utils.py", "filename": "opbeans/utils.py", "module": "opbeans.utils", "function": "stats", "lineno": 24, "library_frame": false, "pre_context": ["        'products': m.Product.objects.count(),", "        'customers': m.Customer.objects.count(),"], "context_line": "        'orders': m.Order.objects.count(),", "post_context": ["        'numbers': numbers", "    }"]}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "43657962e9fec996", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "SET", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996565146674, "duration": 14.258792041800916, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/redis/commands/core.py", "filename": "redis/commands/core.py", "module": "redis.commands.core", "function": "set", "lineno": 1673, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/client/default.py", "filename": "django_redis/client/default.py", "module": "django_redis.client.default", "function": "set", "lineno": 175, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/cache.py", "filename": "django_redis/cache.py", "module": "django_redis.cache", "function": "set", "lineno": 80, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/django_redis/cache.py", "filename": "django_redis/cache.py", "module": "django_redis.cache", "function": "_decorator", "lineno": 31, "library_frame": true}, {"abs_path": "/app/opbeans/tasks.py", "filename": "opbeans/tasks.py", "module": "opbeans.tasks", "function": "update_stats", "lineno": 22, "library_frame": false, "pre_context": ["    elasticapm.label(a=\"x\", b=\"y\")", "    elasticapm.set_custom_context({\"a\": \"x\", \"b\": \"y\"})"], "context_line": "    cache.set(utils.stats.cache_key, utils.stats(), 60)", "post_context": ["", ""]}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "__protected_call__", "lineno": 734, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 451, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "efd3c733e8355e1b", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "GET", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996565176509, "duration": 6.105625012423843, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/redis/commands/core.py", "filename": "redis/commands/core.py", "module": "redis.commands.core", "function": "get", "lineno": 1233, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/redis.py", "filename": "celery/backends/redis.py", "module": "celery.backends.redis", "function": "get", "lineno": 368, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "_get_task_meta_for", "lineno": 978, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "_store_result", "lineno": 956, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "store_result", "lineno": 528, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "mark_as_done", "lineno": 162, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 518, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"span": {"id": "6637240e0cd75bda", "transaction_id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "parent_id": "0f025460f2229c12", "name": "Pipeline.execute", "type": "db", "subtype": "redis", "action": "query", "timestamp": 1644996565188990, "duration": 6.229209015145898, "outcome": "success", "sample_rate": 1.0, "context": {"destination": {"port": 6379, "address": "redis", "service": {"resource": "redis", "name": "", "type": ""}}}, "stacktrace": [{"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/redis.py", "filename": "celery/backends/redis.py", "module": "celery.backends.redis", "function": "_set", "lineno": 401, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/kombu/utils/functional.py", "filename": "kombu/utils/functional.py", "module": "kombu.utils.functional", "function": "retry_over_time", "lineno": 312, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/redis.py", "filename": "celery/backends/redis.py", "module": "celery.backends.redis", "function": "ensure", "lineno": 376, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/redis.py", "filename": "celery/backends/redis.py", "module": "celery.backends.redis", "function": "set", "lineno": 392, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "_set_with_state", "lineno": 839, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "_store_result", "lineno": 962, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "store_result", "lineno": 528, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/backends/base.py", "filename": "celery/backends/base.py", "module": "celery.backends.base", "function": "mark_as_done", "lineno": 162, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "trace_task", "lineno": 518, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/app/trace.py", "filename": "celery/app/trace.py", "module": "celery.app.trace", "function": "fast_trace_task", "lineno": 649, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "workloop", "lineno": 362, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__call__", "lineno": 292, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "run", "lineno": 114, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "_bootstrap", "lineno": 327, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "_launch", "lineno": 79, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/popen_fork.py", "filename": "billiard/popen_fork.py", "module": "billiard.popen_fork", "function": "__init__", "lineno": 24, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/context.py", "filename": "billiard/context.py", "module": "billiard.context", "function": "_Popen", "lineno": 333, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/process.py", "filename": "billiard/process.py", "module": "billiard.process", "function": "start", "lineno": 124, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "_create_worker_process", "lineno": 1158, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "_create_worker_process", "lineno": 480, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/billiard/pool.py", "filename": "billiard/pool.py", "module": "billiard.pool", "function": "__init__", "lineno": 1046, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/asynpool.py", "filename": "celery/concurrency/asynpool.py", "module": "celery.concurrency.asynpool", "function": "__init__", "lineno": 463, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/prefork.py", "filename": "celery/concurrency/prefork.py", "module": "celery.concurrency.prefork", "function": "on_start", "lineno": 109, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/concurrency/base.py", "filename": "celery/concurrency/base.py", "module": "celery.concurrency.base", "function": "start", "lineno": 129, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 365, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bootsteps.py", "filename": "celery/bootsteps.py", "module": "celery.bootsteps", "function": "start", "lineno": 116, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/worker/worker.py", "filename": "celery/worker/worker.py", "module": "celery.worker.worker", "function": "start", "lineno": 203, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/worker.py", "filename": "celery/bin/worker.py", "module": "celery.bin.worker", "function": "worker", "lineno": 351, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/base.py", "filename": "celery/bin/base.py", "module": "celery.bin.base", "function": "caller", "lineno": 134, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/decorators.py", "filename": "click/decorators.py", "module": "click.decorators", "function": "new_func", "lineno": 26, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 754, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1395, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "invoke", "lineno": 1659, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "main", "lineno": 1053, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/click/core.py", "filename": "click/core.py", "module": "click.core", "function": "__call__", "lineno": 1128, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/bin/celery.py", "filename": "celery/bin/celery.py", "module": "celery.bin.celery", "function": "main", "lineno": 213, "library_frame": true}, {"abs_path": "/app/venv/lib/python3.10/site-packages/celery/__main__.py", "filename": "celery/__main__.py", "module": "celery.__main__", "function": "main", "lineno": 15, "library_frame": true}, {"abs_path": "/app/venv/bin/celery", "filename": "bin/celery", "module": "__main__", "function": "<module>", "lineno": 8, "library_frame": false, "pre_context": ["if __name__ == '__main__':", "    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])"], "context_line": "    sys.exit(main())", "post_context": []}]}}
{"transaction": {"id": "0f025460f2229c12", "trace_id": "131570b42ccc686a2558982b09987bbd", "name": "opbeans.tasks.update_stats", "type": "celery", "duration": 207.78991701081395, "result": "SUCCESS", "timestamp": 1644996564996800, "outcome": "success", "sampled": true, "span_count": {"started": 7, "dropped": 0}, "sample_rate": 1.0, "context": {"custom": {"a": "x", "b": "y"}, "tags": {"a": "x", "b": "y"}}}}
{"metadata": {"service": {"name": "opbeans-python", "environment": "production", "version": "None", "agent": {"name": "python", "version": "6.7.2"}, "language": {"name": "python", "version": "3.10.2"}, "runtime": {"name": "CPython", "version": "3.10.2"}, "framework": {"name": "django", "version": "3.2.11"}}, "process": {"pid": 122, "ppid": 109, "argv": ["/app/venv/bin/gunicorn", "--workers", "4", "--bind", "0.0.0.0:3000", "opbeans.wsgi"], "title": null}, "system": {"hostname": "e7a733e715cb", "architecture": "x86_64", "platform": "linux"}}}
{"metricset": {"samples": {"system.cpu.total.norm.pct": {"value": 0.42237503306003704, "type": "gauge"}, "system.memory.actual.free": {"value": 7556235264, "type": "gauge"}, "system.memory.total": {"value": 12544397312, "type": "gauge"}, "system.process.cpu.total.norm.pct": {"value": 0.0, "type": "gauge"}, "system.process.memory.size": {"value": 0, "type": "gauge"}, "system.process.memory.rss.bytes": {"value": 0, "type": "gauge"}}, "timestamp": 1644996570664975}}
{"metricset": {"samples": {"prometheus.metrics.python_gc_objects_collected": {"value": 85141}, "prometheus.metrics.python_gc_objects_uncollectable": {"value": 0}, "prometheus.metrics.python_gc_collections": {"value": 590}}, "timestamp": 1644996570697445, "tags": {"generation": "0"}}}
{"metricset": {"samples": {"prometheus.metrics.python_gc_objects_collected": {"value": 2011}, "prometheus.metrics.python_gc_objects_uncollectable": {"value": 0}, "prometheus.metrics.python_gc_collections": {"value": 4}}, "timestamp": 1644996570697445, "tags": {"generation": "2"}}}
{"metricset": {"samples": {"prometheus.metrics.process_cpu_seconds": {"value": 0.0}, "prometheus.metrics.django_http_requests_before_middlewares": {"value": 64.0}, "prometheus.metrics.django_http_responses_before_middlewares": {"value": 64.0}, "prometheus.metrics.django_http_requests_unknown_latency_including_middlewares": {"value": 0.0}, "prometheus.metrics.django_http_requests_unknown_latency": {"value": 0.0}, "prometheus.metrics.django_http_ajax_requests": {"value": 0.0}, "prometheus.metrics.django_http_responses_streaming": {"value": 0.0}, "prometheus.metrics.opbeans_python_line_items": {"value": 0.0}, "prometheus.metrics.process_virtual_memory_bytes": {"value": 0.0, "type": "gauge"}, "prometheus.metrics.process_resident_memory_bytes": {"value": 0.0, "type": "gauge"}, "prometheus.metrics.process_start_time_seconds": {"value": 1644636478.0, "type": "gauge"}, "prometheus.metrics.process_open_fds": {"value": 12, "type": "gauge"}, "prometheus.metrics.process_max_fds": {"value": 1048576.0, "type": "gauge"}, "prometheus.metrics.opbeans_python_orders.sum": {"value": 0.0}, "prometheus.metrics.opbeans_python_orders.count": {"value": 0.0}, "prometheus.metrics.django_http_requests_latency_including_middlewares_seconds": {"counts": [0, 0, 0, 1, 1, 3, 12, 25, 6, 1, 0, 13, 2, 0, 0], "values": [0.0025, 0.0075, 0.0175, 0.037500000000000006, 0.0625, 0.0875, 0.175, 0.375, 0.625, 0.875, 1.75, 3.75, 6.25, 8.75, 10.0], "type": "histogram"}, "prometheus.metrics.django_http_requests_body_total_bytes": {"counts": [64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "values": [0.0, 0.5, 1.5, 3.0, 6.0, 12.0, 24.0, 48.0, 96.0, 192.0, 384.0, 768.0, 1536.0, 3072.0, 6144.0, 12288.0, 24576.0, 49152.0, 98304.0, 196608.0, 393216.0, 786432.0, 1572864.0, 3145728.0, 6291456.0, 12582912.0, 25165824.0, 50331648.0, 100663296.0, 201326592.0, 402653184.0, 536870912.0], "type": "histogram"}, "prometheus.metrics.django_http_responses_body_total_bytes": {"counts": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 49, 0, 0, 0, 0, 0, 0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "values": [0.0, 0.5, 1.5, 3.0, 6.0, 12.0, 24.0, 48.0, 96.0, 192.0, 384.0, 768.0, 1536.0, 3072.0, 6144.0, 12288.0, 24576.0, 49152.0, 98304.0, 196608.0, 393216.0, 786432.0, 1572864.0, 3145728.0, 6291456.0, 12582912.0, 25165824.0, 50331648.0, 100663296.0, 201326592.0, 402653184.0, 536870912.0], "type": "histogram"}}, "timestamp": 1644996570697445}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_total_by_method": {"value": 64.0}}, "timestamp": 1644996570697445, "tags": {"method": "GET"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_total_by_transport": {"value": 64.0}}, "timestamp": 1644996570697445, "tags": {"transport": "http"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_total_by_view_transport_method": {"value": 49.0}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "transport": "http", "view": "opbeans.views.home"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_responses_total_by_status": {"value": 64.0}}, "timestamp": 1644996570697445, "tags": {"status": "200"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_responses_total_by_status_view_method": {"value": 49.0}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "status": "200", "view": "opbeans.views.home"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_responses_total_by_charset": {"value": 64.0}}, "timestamp": 1644996570697445, "tags": {"charset": "utf-8"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_total_by_view_transport_method": {"value": 15.0}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "transport": "http", "view": "orders"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_responses_total_by_status_view_method": {"value": 15.0}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "status": "200", "view": "orders"}}}
{"metricset": {"samples": {"prometheus.metrics.python_info": {"value": 1, "type": "gauge"}}, "timestamp": 1644996570697445, "tags": {"implementation": "CPython", "major": "3", "minor": "10", "patchlevel": "2", "version": "3.10.2"}}}
{"metricset": {"samples": {"prometheus.metrics.django_migrations_unapplied_total": {"value": 0.0, "type": "gauge"}, "prometheus.metrics.django_migrations_applied_total": {"value": 20.0, "type": "gauge"}}, "timestamp": 1644996570697445, "tags": {"connection": "default"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_latency_seconds_by_view_method": {"counts": [0, 0, 1, 3, 2, 12, 27, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0], "values": [0.005, 0.0175, 0.037500000000000006, 0.0625, 0.0875, 0.175, 0.375, 0.625, 0.875, 1.75, 3.75, 6.25, 8.75, 17.5, 37.5, 62.5, 75.0], "type": "histogram"}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "view": "opbeans.views.home"}}}
{"metricset": {"samples": {"prometheus.metrics.django_http_requests_latency_seconds_by_view_method": {"counts": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 2, 0, 0, 0, 0, 0], "values": [0.005, 0.0175, 0.037500000000000006, 0.0625, 0.0875, 0.175, 0.375, 0.625, 0.875, 1.75, 3.75, 6.25, 8.75, 17.5, 37.5, 62.5, 75.0], "type": "histogram"}}, "timestamp": 1644996570697445, "tags": {"method": "GET", "view": "orders"}}}
