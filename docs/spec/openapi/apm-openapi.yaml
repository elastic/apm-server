openapi: 3.1.0
info:
  title: APM Server
  description: OpenAPI schema for APM Server APIs
  version: 8.13.0
  license:
    name: Elastic License 2.0
    url: https://www.elastic.co/licensing/elastic-license
  contact:
    name: APM Team
servers:
  - url: /
tags:
  - name: server info
    description: APIs that query general server information.
    x-displayName: APM server information
paths:
  /:
    get:
      summary: Retrieve general server information.
      description: |
        This lightweight endpoint is useful as a server up/down health check.
        To configure authenticated access to the APM server, the instructions at [APM API key](https://www.elastic.co/guide/en/observability/current/api-key.html) or [APM Secret Token](https://www.elastic.co/guide/en/observability/current/secret-token.html) must be followed to configure the correct permissions for APM access.
      operationId: getServerHealth
      tags:
        - server info
      responses:
        '200':
          $ref: '#/components/responses/200_server_info'
    post:
      summary: Retrieve general server information.
      operationId: postServerHealth
      tags:
        - server info
      responses:
        '200':
          $ref: '#/components/responses/200_server_info'
components:
  securitySchemes:
    apiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: 'e.g. Authorization: ApiKey base64AccessApiKey'
    secretToken:
      type: http
      scheme: bearer
      bearerFormat: Secret token
  responses:
    200_server_info:
      description: A successful response.
      content:
        application/json:
          schema:
            description: When an API key or a secret token is passed along with the request, the response payload includes some information about the APM server.
            type: object
            properties:
              build_date:
                type: string
                format: time-date
              build_sha:
                type: string
              publish_ready:
                type: boolean
              version:
                type: string
          examples:
            getServerHealthAuthResponse:
              summary: Example APM Server information request with a secret token
              value:
                build_date: '2021-12-18T19:59:06Z'
                build_sha: 24fe620eeff5a19e2133c940c7e5ce1ceddb1445
                publish_ready: true
                version: 8.12.2
        text/plain:
          schema:
            description: Indicates that the server is up.
            type: string
          examples:
            getServerHealthBasicResponse:
              summary: Example APM Server status request without credentials
              value: |
                *   Trying 127.0.0.1:8200...
                * TCP_NODELAY set
                * Connected to 127.0.0.1 (10.244.3.40) port 8200 (#0)
                > GET / HTTP/1.1
                > Host: 127.0.0.1:8200
                > User-Agent: curl/7.68.0
                > Accept: */*
                >
                * Mark bundle as not supporting multiuse
                < HTTP/1.1 200 OK
                < X-Content-Type-Options: nosniff
                < Date: Tue, 17 Oct 2023 22:04:05 GMT
                < Content-Length: 0
                <
                * Connection #0 to host 127.0.0.1 left intact 
security:
  - apiKeyAuth: [ ]
  - secretToken: [ ]