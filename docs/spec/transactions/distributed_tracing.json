{
    "$id": "docs/spec/transactions/distributed_tracing.json",
    "description": "Data captured by an agent representing an event occurring in a monitored service",

    "type": "object",
    "properties": {
        "transactions": {
            "type": "array",
            "items": {
                "allOf": [
                    { 
                      "$ref": "distributed_tracing_relations.json" 
                    },
                    { "$ref": "transaction_common.json" }
                ]
            },
            "minItems": 1
        }, 
        "spans": {
            "type": ["array", "null"],
            "items": {
                "allOf": [
                     { "$ref": "distributed_tracing_relations.json" },
                     { "$ref": "span_common.json" },
                     {
                         "properties": {
                             "transaction_id": {
                                 "type": ["string"],
                                 "description": "Id of the correlated transaction.",
                                 "pattern": "^[a-fA-F0-9]{16}$"
                             }
                         },
                         "required": ["transaction_id"]
                     }
                ]
            },
            "minItems": 0
        }
    },
    "required": ["transactions"]
}
